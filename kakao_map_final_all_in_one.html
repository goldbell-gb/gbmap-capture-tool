
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ì¹´ì¹´ì˜¤ ì§€ë„ - ë§ˆì»¤ + í™”ë©´ ì¤‘ì‹¬ ë³´ì •</title>
  <style>
    html, body { margin: 0; padding: 0; font-family: sans-serif; overflow: auto; }
    #controls {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 999;
      background: rgba(255, 255, 255, 0.95);
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
    }
    #map {
      overflow: scroll;
      min-width: 9000px;
      min-height: 9000px;
      max-width: 9000px;
      max-height: 9000px;
      width: 9000px;
      height: 9000px;
    }
    input, select, button {
      margin-top: 5px;
      padding: 6px;
      width: 180px;
    }
    #toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #333;
      color: white;
      padding: 8px 12px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      z-index: 1000;
    }
  </style>
</head>
<body>
  <button id="toggle" onclick="toggleUI()">UI ìˆ¨ê¸°ê¸°</button>
  <div id="controls">
    <label>ì§€ë„ ìœ í˜•:</label>
    <select id="mapType" onchange="changeMapType()">
      <option value="ROADMAP">ì¼ë°˜ì§€ë„</option>
      <option value="HYBRID">í•˜ì´ë¸Œë¦¬ë“œ</option>
      <option value="SKYVIEW" selected>ìœ„ì„±ì§€ë„</option>
    </select><br>

    <label>ì£¼ì†Œ ê²€ìƒ‰:</label>
    <input type="text" id="addr" placeholder="ì˜ˆ: êµ¬ë°˜í¬ì—­" />
    <button onclick="searchAddr()">ì£¼ì†Œë¡œ ì´ë™</button><br>

    <label>ì§€ë„ í¬ê¸°(px):</label><br>
    ê°€ë¡œ: <input type="number" id="mapWidth" value="9000"><br>
    ì„¸ë¡œ: <input type="number" id="mapHeight" value="9000"><br>
    ì¤Œ ë ˆë²¨:
    <select id="zoomLevel">
      <option value="1">1 (ìµœì†Œ í™•ëŒ€)</option>
      <option value="3">3</option>
      <option value="5" selected>5</option>
      <option value="7">7</option>
      <option value="10">10</option>
      <option value="12">12</option>
      <option value="14">14 (ìµœëŒ€ í™•ëŒ€)</option>
    </select><br><br>

    <button onclick="applySettings()">ì„¤ì • ì ìš©</button><br><br>

    <label><input type="checkbox" id="markerToggle" checked> ë§ˆì»¤ ì‚¬ìš©</label><br>
    <button onclick="clearMarker()">ğŸ“ ë§ˆì»¤ ì´ˆê¸°í™”</button><br><br>

    <button onclick="savePosition()">ğŸ“Œ í˜„ì¬ ìœ„ì¹˜ ì €ì¥</button>
    <button onclick="restorePosition()">ğŸ“ ìœ„ì¹˜ ë³µì›</button>
    <button onclick="scrollToMapCenter()">ğŸ¯ ì¤‘ì•™ ë§ì¶”ê¸°</button>
  </div>

  <div id="map-wrapper" style="width: 9000px; height: 9000px; overflow: scroll;">
    <div id="map"></div>
  </div>

  <script type="text/javascript"
    src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b0bf0079d2279c9cef60d94996a263b6&autoload=false&libraries=services"></script>
  <script>
    var map;
    var savedCenter = null;
    var marker = null;

    kakao.maps.load(function() {
      initMap();
    });

    function initMap() {
      const width = parseInt(document.getElementById('mapWidth').value);
      const height = parseInt(document.getElementById('mapHeight').value);
      const zoom = parseInt(document.getElementById('zoomLevel').value);
      const type = document.getElementById("mapType").value;

      const mapDiv = document.getElementById('map');
      mapDiv.style.width = width + 'px';
      mapDiv.style.height = height + 'px';

      map = new kakao.maps.Map(mapDiv, {
        center: new kakao.maps.LatLng(37.503063, 126.996637),
        level: zoom,
        mapTypeId: kakao.maps.MapTypeId[type]
      });

      scrollToMapCenter(); // ì´ˆê¸° ìŠ¤í¬ë¡¤

      kakao.maps.event.addListener(map, 'click', function(mouseEvent) {
        if (!document.getElementById('markerToggle').checked) return;
        const latlng = mouseEvent.latLng;
        placeMarker(latlng);
      });

      kakao.maps.event.addListener(map, 'center_changed', scrollToMapCenter);
      kakao.maps.event.addListener(map, 'zoom_changed', function() {
        setTimeout(scrollToMapCenter, 300);
      });
    }

    function scrollToMapCenter() {
      const mapDiv = document.getElementById('map');
      const centerX = mapDiv.offsetLeft + mapDiv.offsetWidth / 2;
      const centerY = mapDiv.offsetTop + mapDiv.offsetHeight / 2;
      window.scrollTo(centerX - window.innerWidth / 2, centerY - window.innerHeight / 2);
    }

    function changeMapType() {
      const type = document.getElementById("mapType").value;
      map.setMapTypeId(kakao.maps.MapTypeId[type]);
    }

    function searchAddr() {
      const addr = document.getElementById("addr").value;
      const geocoder = new kakao.maps.services.Geocoder();
      geocoder.addressSearch(addr, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
          map.panTo(coords);
          if (document.getElementById('markerToggle').checked) {
            placeMarker(coords);
          }
        } else {
          alert("ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
      });
    }

    function placeMarker(position) {
      if (marker) marker.setMap(null);
      marker = new kakao.maps.Marker({ position: position });
      marker.setMap(map);
    }

    function clearMarker() {
      if (marker) {
        marker.setMap(null);
        marker = null;
      }
    }

    function applySettings() {
      initMap();
    }

    function savePosition() {
      savedCenter = map.getCenter();
      alert("í˜„ì¬ ìœ„ì¹˜ ì €ì¥ë¨");
    }

    function restorePosition() {
      if (savedCenter) {
        map.setCenter(savedCenter);
      } else {
        alert("ì €ì¥ëœ ìœ„ì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤.");
      }
    }

    function toggleUI() {
      const ui = document.getElementById("controls");
      ui.style.display = ui.style.display === "none" ? "block" : "none";
      const toggleBtn = document.getElementById("toggle");
      toggleBtn.innerText = ui.style.display === "none" ? "UI ë³´ì´ê¸°" : "UI ìˆ¨ê¸°ê¸°";
    }
  </script>
</body>
</html>
